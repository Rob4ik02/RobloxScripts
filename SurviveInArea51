local Players = game:GetService("Players")
local player = Players.LocalPlayer
local place = game.PlaceId

local idPlaces = {
    Surviveinarea51 = 2214661900,
    BuildABoatForTreasure = 537413528
}

if place == idPlaces.Surviveinarea51 then

    local Luna = loadstring(game:HttpGet("https://raw.githubusercontent.com/Nebula-Softworks/Luna-Interface-Suite/refs/heads/master/source.lua", true))()

    local Window = Luna:CreateWindow({
        Name = "Global Script's | SIA51",
        Subtitle = "free trial",
        LogoID = rbxassetid://91154874732986,
        LoadingEnabled = true,
        LoadingTitle = "Oxygen 02",
        LoadingSubtitle = "Survive In Area 51",
        ConfigSettings = {
            RootFolder = nil,
            ConfigFolder = "Big Hub"
        },
        KeySystem = false,
    })

    -- Создание и проверка части для бэйпаса
    if not workspace:FindFirstChild("Oxy02-BypassCheat") then
        local par = Instance.new("Part")
        par.Parent = workspace
        par.Anchored = true
        par.Locked = true
        par.Name = "Oxy02-BypassCheat"
        par.Position = Vector3.new(624, 1143.7354695, 747)
        par.CanCollide = false
        par.Transparency = 1
        par.Size = Vector3.new(35, 2, 35)
    end

    local bypassPart = workspace:FindFirstChild("Oxy02-BypassCheat")

    -- Триггер для бэйпаса
    task.spawn(function()
        while true do
            if bypassPart then
                pcall(function()
                    local player = Players.LocalPlayer
                    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                        firetouchinterest(player.Character.HumanoidRootPart, bypassPart, 0)
                        firetouchinterest(player.Character.HumanoidRootPart, bypassPart, 1)
                    end
                end)
            end
            task.wait(0.1)
        end
    end)

    local function getTime()
        local playerGui = Players.LocalPlayer:FindFirstChild("PlayerGui")
        if playerGui and playerGui:FindFirstChild("EventGUI") then
            return playerGui.EventGUI:FindFirstChild("Time") and playerGui.EventGUI.Time.Value or nil
        end
        return nil
    end

    player:SetAttribute("WaitScriptEnd", false)

    -- Создаем вкладки
    local TabAura = Window:CreateTab({
        Name = "[ 1 ] Aura",
        Icon = "view_in_ar",
        ImageSource = "Material",
        ShowTitle = true
    })

    local togl = false

    local LabelWarn1 = TabAura:CreateLabel({
        Text = "Before you will turn on aura, read this below :|",
        Style = 3
    })

    local ParagraphWarn1 = TabAura:CreateParagraph({
        Title = "Read this.",
        Text = "Turning on some Aura can result in a ban or reset of your data. We do not recommend turning it on always."
    })

    local ToggleAuraHit = TabAura:CreateToggle({
        Name = "Hit Aura [ Lag ]",
        Description = nil,
        CurrentValue = false,
        Callback = function(Value)
            togl = Value
            if togl then
                spawn(function()
                    while togl do
                        pcall(function()
                            local player = Players.LocalPlayer
                            local character = player.Character
                            local rootPart = character and character:FindFirstChild("HumanoidRootPart")
                            local tool = character and character:FindFirstChildOfClass("Tool")
                            if rootPart and tool and tool:FindFirstChild("GunScript_Server") then
                                local parts = workspace:GetPartBoundsInRadius(rootPart.Position, 40)
                                for _, part in ipairs(parts) do
                                    if part.Parent and part.Parent:FindFirstChildOfClass("Humanoid") and part.Parent ~= character then
                                        local humanoid = part.Parent:FindFirstChildOfClass("Humanoid")
                                        local args = {
                                            [1] = "Head",
                                            [2] = humanoid,
                                            [3] = humanoid.Parent:FindFirstChild("Head"),
                                            [4] = tool,
                                            [5] = Vector3.new(0.9372, -0.3045, -0.1700)
                                        }
                                        pcall(function()
                                            tool.GunScript_Server.InflictTarget:FireServer(unpack(args))
                                        end)
                                    end
                                end
                            end
                        end)
                        task.wait(0.1)
                    end
                end)
            end
        end
    })

    local TogglePowerfulAura = TabAura:CreateToggle({
        Name = "Powerful hit aura [ Lag ]",
        Description = nil,
        CurrentValue = false,
        Callback = function(Value)
            togl = Value
            if togl then
                spawn(function()
                    while togl do
                        pcall(function()
                            local rootPart = Players.LocalPlayer.Character and Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                            if rootPart then
                                local parts = workspace:GetPartBoundsInRadius(rootPart.Position, 40)
                                for _, part in ipairs(parts) do
                                    if part.Parent and part.Parent:FindFirstChildOfClass("Humanoid") and part.Parent ~= Players.LocalPlayer.Character and part.Parent.Name ~= "FakeFriend" then
                                        local humanoid = part.Parent:FindFirstChildOfClass("Humanoid")
                                        if humanoid and humanoid.Health > 0 and not Players:GetPlayerFromCharacter(humanoid.Parent) then
                                            for _, item in ipairs(Players.LocalPlayer.Character:GetChildren()) do
                                                if item:IsA("Tool") and item:FindFirstChild("GunScript_Server") then
                                                    local args = {
                                                        [1] = "Head",
                                                        [2] = humanoid,
                                                        [3] = humanoid.Parent:FindFirstChild("Head"),
                                                        [4] = item,
                                                        [5] = Vector3.new(0.9372, -0.3045, -0.1700)
                                                    }
                                                    pcall(function()
                                                        item.GunScript_Server.InflictTarget:FireServer(unpack(args))
                                                    end)
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end)
                        task.wait(0.1)
                    end
                end)
            end
        end
    })

    -- Кнопка для мгновенной регенерации
    local TabRegeneration = Window:CreateTab({
        Name = "[ 2 ] Regeneration",
        Icon = "view_in_ar",
        ImageSource = "Material",
        ShowTitle = true
    })

    local ButtonRegenerate = TabRegeneration:CreateButton({
        Name = "Instant regeneration",
        Callback = function()
            local player = Players.LocalPlayer
            local char = player.Character
            if char and char:FindFirstChild("Humanoid") then
                char.Humanoid.Health = char.Humanoid.MaxHealth
            end
        end
    })

    local loip = false
    local ToggleRegenerationInf = TabRegeneration:CreateToggle({
        Name = "Instant regeneration",
        Description = nil,
        CurrentValue = false,
        Callback = function(Value)
            loip = Value
            while loip and task.wait() do
                pcall(function()
                    if getTime() then
                        local time = getTime()
                        if time < 15 then
                            firetouchinterest(Players.LocalPlayer.Character.Head, workspace.Misc["Blizzard Armor"].Head, 1)
                            firetouchinterest(Players.LocalPlayer.Character.Head, workspace.Misc["Blizzard Armor"].Head, 0)
                        elseif time >= 15 and time < 30 then
                            firetouchinterest(Players.LocalPlayer.Character.Head, workspace.Misc:FindFirstChild("Silver Armor - 15 min Playtime").Head, 0)
                            firetouchinterest(Players.LocalPlayer.Character.Head, workspace.Misc:FindFirstChild("Silver Armor - 15 min Playtime").Head, 1)
                        elseif time >= 30 and time < 60 then
                            firetouchinterest(Players.LocalPlayer.Character.Head, workspace.Misc:FindFirstChild("Golden Armor - 30 min Playtime").Head, 0)
                            firetouchinterest(Players.LocalPlayer.Character.Head, workspace.Misc:FindFirstChild("Golden Armor - 30 min Playtime").Head, 1)
                        elseif time >= 60 then
                            firetouchinterest(Players.LocalPlayer.Character.Head, workspace.Misc:FindFirstChild("Diamond Armor - 60 min Playtime").Head, 0)
                            firetouchinterest(Players.LocalPlayer.Character.Head, workspace.Misc:FindFirstChild("Diamond Armor - 60 min Playtime").Head, 1)
                        end
                    end
                end)
            end
        end
    })

    local function getPlayerByLowerName(name)
        for _, p in ipairs(Players:GetPlayers()) do
            if p.Name:lower() == name:lower() then
                return p
            end
        end
        return nil
    end

    local InputPlayerHeal = TabRegeneration:CreateInput({
        Name = "Heal Player",
        Description = nil,
        PlaceholderText = "Write name of player to heal him",
        CurrentValue = "",
        Numeric = false,
        MaxCharacters = nil,
        Enter = true,
        Callback = function(Value)
            local targetPlayer = getPlayerByLowerName(Value)
            if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChildOfClass("Humanoid") then
                local hum = targetPlayer.Character:FindFirstChildOfClass("Humanoid")
                hum.Health = hum.MaxHealth
            else
                warn("Игрок не найден или его персонаж отсутствует")
            end
        end
    })

    local healAll = false
    local function toggleHealAll(Value)
        healAll = Value
        if healAll then
            spawn(function()
                while healAll do
                    for _, player in ipairs(Players:GetPlayers()) do
                        if player.Character and player.Character:FindFirstChildOfClass("Humanoid") then
                            local hum = player.Character:FindFirstChildOfClass("Humanoid")
                            hum.Health = hum.MaxHealth
                        end
                    end
                    task.wait(0.5)
                end
            end)
        end
    end

    local ToggleHealAll = TabRegeneration:CreateToggle({
        Name = "Heal all players",
        Description = "healing all players",
        CurrentValue = false,
        Callback = toggleHealAll
    })

    local TabMisc = Window:CreateTab({
        Name = "[ 3 ] Misc",
        Icon = "view_in_ar",
        ImageSource = "Material",
        ShowTitle = true
    })

    local ButtonSafeIncinerator = TabMisc:CreateButton({
        Name = "Safe incinerator",
        Description = nil,
        Callback = function()
            if workspace:FindFirstChild("Incinerator") then
                local incinerator = workspace:FindFirstChild("Incinerator")
                if incinerator:FindFirstChild("Model") then
                    local model = incinerator.Model
                    if model:FindFirstChild("Challenge1") then
                        model.Challenge1.Model.ChallengeGate:Destroy()
                    end
                end
                if incinerator:FindFirstChild("Acid") then
                    incinerator.Acid:Destroy()
                end
            end
        end
    })

    local function havetool(toool)
        for _, tool in next, table.merger(Players.LocalPlayer.Backpack:GetChildren(), Players.LocalPlayer.Character:GetChildren()) do
            if tool:IsA("Tool") and tool.Name == toool.Name then
                return true
            end
        end
        return false
    end

    local function returnpos(time)
        if Players.LocalPlayer:GetAttribute("WaitScriptEnd") == false then
            Players.LocalPlayer:SetAttribute("WaitScriptEnd", true)
            local pos = Players.LocalPlayer.Character.HumanoidRootPart.CFrame
            task.delay(time, function()
                Players.LocalPlayer:SetAttribute("WaitScriptEnd", false)
                Players.LocalPlayer.Character.HumanoidRootPart.CFrame = pos
            end)
        end
    end

    local DropdownTeleport = TabMisc:CreateDropdown({
        Name = "Teleport to ",
        Description = nil,
        Options = {
            "Spawn",
            "Portal",
            "Incinerator",
            "Metro",
            "Sewerage",
            "Reaper door",
            "Craft zone",
            "Mineshaft"
        },
        CurrentOption = "Spawn",
        MultipleOptions = false,
        SpecialType = nil,
        Callback = function(Value)
            local hrp = Players.LocalPlayer.Character and Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if not hrp then return end
            -- Здесь можно добавить телепорт по Value
        end
    })

    local Sorting = false

    local ToggleSpamTools = TabMisc:CreateToggle({
        Name = "Spam Tools",
        Description = nil,
        CurrentValue = false,
        Callback = function(Value)
            Sorting = Value
            if Sorting then
                spawn(function()
                    while Sorting do
                        for _, item in ipairs(Players.LocalPlayer.Backpack:GetChildren()) do
                            if item:IsA("Tool") then
                                local humanoid = Players.LocalPlayer.Character and Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
                                if humanoid then
                                    humanoid:EquipTool(item)
                                    task.wait(0.1)
                                    humanoid:UnequipTools()
                                end
                                task.wait(0.1)
                            end
                        end
                        task.wait()
                    end
                end)
            end
        end
    })

    local TabFarm = Window:CreateTab({
        Name = "[ 4 ] Farm Monsters",
        Icon = "view_in_ar",
        ImageSource = "Material",
        ShowTitle = true
    })

    local ButtonHit = TabFarm:CreateButton({
        Name = "Hit all entities",
        Callback = function()
            for _, mod in ipairs(workspace:GetChildren()) do
                if mod:IsA("Model") and mod:FindFirstChild("Head") and mod:FindFirstChildOfClass("Humanoid") then
                    local humanoid = mod:FindFirstChildOfClass("Humanoid")
                    local tool = Players.LocalPlayer.Character and Players.LocalPlayer.Character:FindFirstChildOfClass("Tool")
                    if tool then
                        local args = {
                            "Head",
                            humanoid,
                            humanoid.Parent:FindFirstChild("Head"),
                            tool,
                            Vector3.new(0.9372, -0.3045, -0.1700)
                        }
                        local success, err = pcall(function()
                            if tool.GunScript_Server then
                                tool.GunScript_Server.InflictTarget:FireServer(unpack(args))
                            end
                        end)
                        if not success then
                            warn("Ошибка при атаке врага: ", err)
                        end
                    end
                end
            end
        end
    })

    local oop = false
    local ToggleHitLoop = TabFarm:CreateToggle({
        Name = "Hit all entities ( Looped )",
        Description = "Loop hit",
        CurrentValue = false,
        Callback = function(Value)
            oop = Value
            if oop then
                spawn(function()
                    while oop do
                        for _, mod in ipairs(workspace:GetChildren()) do
                            if mod:IsA("Model") and mod:FindFirstChild("Head") and mod:FindFirstChildOfClass("Humanoid") then
                                local humanoid = mod:FindFirstChildOfClass("Humanoid")
                                local tool = Players.LocalPlayer.Character and Players.LocalPlayer.Character:FindFirstChildOfClass("Tool")
                                if tool then
                                    local args = {
                                        "Head",
                                        humanoid,
                                        humanoid.Parent:FindFirstChild("Head"),
                                        tool,
                                        Vector3.new(0.9372, -0.3045, -0.1700)
                                    }
                                    local success, err = pcall(function()
                                        if tool.GunScript_Server then
                                            tool.GunScript_Server.InflictTarget:FireServer(unpack(args))
                                        end
                                    end)
                                    if not success then
                                        warn("Ошибка при циклическом ударе: ", err)
                                    end
                                end
                            end
                        end
                        task.wait(0.1)
                    end
                end)
            end
        end
    })

    local admins = {5022921494}
    Players.PlayerAdded:Connect(function(player)
        if table.find(admins, player.UserId) and
            not table.find(admins, Players.LocalPlayer.CharacterAppearanceId) and
            not Players.LocalPlayer:IsFriendsWith(player.UserId) then
            -- Здесь можно добавить действия при появлении админа
        end
    end)

    for _, player in next, Players:GetPlayers() do
        firesignal(Players.PlayerAdded, player)
    end

    -- Финальное уведомление
    Luna:Notification({
        Title = "Hey!",
        Icon = "notifications_active",
        ImageSource = "Material",
        Content = "Script is fully loaded!"
    })
end
