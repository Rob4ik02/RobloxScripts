local Players = game:GetService("Players")
local player = Players.LocalPlayer
local place = game.PlaceId

local idPlaces = {
    Surviveinarea51 = 2214661900,
    BuildABoatForTreasure = 537413528
}

if place == idPlaces.Surviveinarea51 then
    -- Загрузка Luna Interface
    local Luna = loadstring(game:HttpGet("https://raw.githubusercontent.com/Nebula-Softworks/Luna-Interface-Suite/refs/heads/master/source.lua", true))()

    -- Создание окна
    local Window = Luna:CreateWindow({
        Name = "Global Script's",
        Subtitle = "Survive In Area 51",
        LogoID = 91154874732986,
        LoadingEnabled = true,
        LoadingTitle = "Oxygen 02",
        LoadingSubtitle = "Survive In Area 51",
        ConfigSettings = {
            RootFolder = nil,
            ConfigFolder = "GlobalScripts",
        },
        KeySystem = false,
    })

    -- Создание Home Tab
    Window:CreateHomeTab({
        SupportedExecutors = {"Krnl", "Volcano", "Arceus x neo", "Delta", "Fluxus"},
        DiscordInvite = "GZmrm5mq",
        Icon = 2,
    })

    -- Создание части для бэйпаса
    if not workspace:FindFirstChild("GlobalScripts-BypassCheat") then
        local par = Instance.new("Part")
        par.Parent = workspace
        par.Anchored = true
        par.Locked = true
        par.Name = "Oxy02-BypassCheat"
        par.Position = Vector3.new(624, 1143.7354695, 747)
        par.CanCollide = false
        par.Transparency = 1
        par.Size = Vector3.new(35, 2, 35)
    end

    local bypassPart = workspace:FindFirstChild("GlobalScripts-BypassCheat")

    -- Триггер для бэйпаса
    task.spawn(function()
        while true do
            if bypassPart then
                pcall(function()
                    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                    if hrp then
                        firetouchinterest(hrp, bypassPart, 0)
                        firetouchinterest(hrp, bypassPart, 1)
                    end
                end)
            end
            task.wait(0.1)
        end
    end)

    -- Функция получения времени
    local function getTime()
        local playerGui = player:FindFirstChild("PlayerGui")
        if playerGui and playerGui:FindFirstChild("EventGUI") then
            return playerGui.EventGUI:FindFirstChild("Time") and playerGui.EventGUI.Time.Value or nil
        end
        return nil
    end

    player:SetAttribute("WaitScriptEnd", false)

    -- Создание вкладок
    local TabAura = Window:CreateTab({
        Name = "[ 1 ] Aura",
        Icon = "radar",
        ImageSource = "Material",
        ShowTitle = true
    })

    local togl = false

    -- Предупреждение
    local LabelWarn1 = TabAura:CreateLabel({
        Text = "Before you will turn on aura, read this below :|",
        Style = 3
    })

    local ParagraphWarn1 = TabAura:CreateParagraph({
        Title = "Read this.",
        Text = "Turning on some Aura can result in a ban or reset of your data. We do not recommend turning it on always."
    })

    -- Hit Aura [Lag]
    local ToggleAuraHit = TabAura:CreateToggle({
        Name = "Hit Aura [ Lag ]",
        Description = nil,
        CurrentValue = false,
        Callback = function(Value)
            togl = Value
            if togl then
                spawn(function()
                    while togl do
                        pcall(function()
                            local rootPart = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                            local tool = player.Character and player.Character:FindFirstChildOfClass("Tool")
                            if rootPart and tool and tool:FindFirstChild("GunScript_Server") then
                                local parts = workspace:GetPartBoundsInRadius(rootPart.Position, 40)
                                for _, part in ipairs(parts) do
                                    if part.Parent and part.Parent:FindFirstChildOfClass("Humanoid") and part.Parent ~= player.Character then
                                        local humanoid = part.Parent:FindFirstChildOfClass("Humanoid")
                                        local args = {
                                            [1] = "Head",
                                            [2] = humanoid,
                                            [3] = humanoid.Parent:FindFirstChild("Head"),
                                            [4] = tool,
                                            [5] = Vector3.new(0.9372, -0.3045, -0.1700)
                                        }
                                        pcall(function()
                                            tool.GunScript_Server.InflictTarget:FireServer(unpack(args))
                                        end)
                                    end
                                end
                            end
                        end)
                        task.wait(0.1)
                    end
                end)
            end
        end
    })

    -- Powerful hit aura [Lag]
    local TogglePowerfulAura = TabAura:CreateToggle({
        Name = "Powerful hit aura [ Lag ]",
        Description = nil,
        CurrentValue = false,
        Callback = function(Value)
            togl = Value
            if togl then
                spawn(function()
                    while togl do
                        pcall(function()
                            local rootPart = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                            if rootPart then
                                local parts = workspace:GetPartBoundsInRadius(rootPart.Position, 40)
                                for _, part in ipairs(parts) do
                                    if part.Parent and part.Parent:FindFirstChildOfClass("Humanoid") and part.Parent ~= player.Character and part.Parent.Name ~= "FakeFriend" then
                                        local humanoid = part.Parent:FindFirstChildOfClass("Humanoid")
                                        if humanoid and humanoid.Health > 0 and not Players:GetPlayerFromCharacter(humanoid.Parent) then
                                            for _, item in ipairs(player.Character:GetChildren()) do
                                                if item:IsA("Tool") and item:FindFirstChild("GunScript_Server") then
                                                    local args = {
                                                        [1] = "Head",
                                                        [2] = humanoid,
                                                        [3] = humanoid.Parent:FindFirstChild("Head"),
                                                        [4] = item,
                                                        [5] = Vector3.new(0.9372, -0.3045, -0.1700)
                                                    }
                                                    pcall(function()
                                                        item.GunScript_Server.InflictTarget:FireServer(unpack(args))
                                                    end)
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end)
                        task.wait(0.1)
                    end
                end)
            end
        end
    })

    -- Вкладка Regeneration
    local TabRegeneration = Window:CreateTab({
        Name = "[ 2 ] Regeneration",
        Icon = "health_and_safety",
        ImageSource = "Material",
        ShowTitle = true
    })

    -- Мгновенная регенерация по кнопке
    local ButtonRegenerate = TabRegeneration:CreateButton({
        Name = "Instant regeneration",
        Callback = function()
            local char = player.Character
            if char and char:FindFirstChild("Humanoid") then
                char.Humanoid.Health = char.Humanoid.MaxHealth
            end
        end
    })

    -- Флаг для автоматической регенерации
    local loip = false

    -- Автоматическая регенерация
    local ToggleRegenerationInf = TabRegeneration:CreateToggle({
        Name = "Instant regeneration",
        Description = nil,
        CurrentValue = false,
        Callback = function(Value)
            loip = Value
            spawn(function()
                while loip do
                    pcall(function()
                        local time = getTime()
                        if time then
                            if time < 15 then
                                firetouchinterest(player.Character.Head, workspace.Misc["Blizzard Armor"].Head, 1)
                                firetouchinterest(player.Character.Head, workspace.Misc["Blizzard Armor"].Head, 0)
                            elseif time >= 15 and time < 30 then
                                firetouchinterest(player.Character.Head, workspace.Misc:FindFirstChild("Silver Armor - 15 min Playtime").Head, 0)
                                firetouchinterest(player.Character.Head, workspace.Misc:FindFirstChild("Silver Armor - 15 min Playtime").Head, 1)
                            elseif time >= 30 and time < 60 then
                                firetouchinterest(player.Character.Head, workspace.Misc:FindFirstChild("Golden Armor - 30 min Playtime").Head, 0)
                                firetouchinterest(player.Character.Head, workspace.Misc:FindFirstChild("Golden Armor - 30 min Playtime").Head, 1)
                            elseif time >= 60 then
                                firetouchinterest(player.Character.Head, workspace.Misc:FindFirstChild("Diamond Armor - 60 min Playtime").Head, 0)
                                firetouchinterest(player.Character.Head, workspace.Misc:FindFirstChild("Diamond Armor - 60 min Playtime").Head, 1)
                            end
                        end
                    end)
                    task.wait(0.5)
                end
            end)
        end
    })

    -- Функция поиска игрока по имени (независимо от регистра)
    local function getPlayerByLowerName(name)
        for _, p in ipairs(Players:GetPlayers()) do
            if p.Name:lower() == name:lower() then
                return p
            end
        end
        return nil
    end

    -- Ввод для лечения игрока
    local InputPlayerHeal = TabRegeneration:CreateInput({
        Name = "Heal Player",
        Description = nil,
        PlaceholderText = "Write name of player to heal him",
        CurrentValue = "",
        Numeric = false,
        MaxCharacters = nil,
        Enter = true,
        Callback = function(Value)
            local targetPlayer = getPlayerByLowerName(Value)
            if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChildOfClass("Humanoid") then
                local hum = targetPlayer.Character:FindFirstChildOfClass("Humanoid")
                hum.Health = hum.MaxHealth
            else
                warn("Игрок не найден или его персонаж отсутствует")
            end
        end
    })

    -- Флаг для массового лечения
    local healAll = false

    -- Триггер для массового лечения
    local function toggleHealAll(Value)
        healAll = Value
        if healAll then
            spawn(function()
                while healAll do
                    for _, p in ipairs(Players:GetPlayers()) do
                        if p.Character and p.Character:FindFirstChildOfClass("Humanoid") then
                            p.Character.Humanoid.Health = p.Character.Humanoid.MaxHealth
                        end
                    end
                    task.wait(0.5)
                end
            end)
        end
    end

    -- Тумблер для массового лечения
    local ToggleHealAll = TabRegeneration:CreateToggle({
        Name = "Heal all players",
        Description = "Healing all players",
        CurrentValue = false,
        Callback = toggleHealAll
    })

    -- Создание вкладки Misc
    local TabMisc = Window:CreateTab({
        Name = "[ 3 ] Misc",
        Icon = "miscellaneous_services",
        ImageSource = "Material",
        ShowTitle = true
    })

    -- Создание вкладки Settings
    local SettingsTab = Window:CreateTab({
        Name = "Settings",
        Icon = "settings",
        ImageSource = "Material",
        ShowTitle = true
    })

    -- Создание вкладки Credits
    local CreditsTab = Window:CreateTab({
        Name = "Credits",
        Icon = "info",
        ImageSource = "Material",
        ShowTitle = true
    })

    -- Лейблы в вкладке Credits
    local Label1 = CreditsTab:CreateLabel({
        Text = "Our Telegram: @universalscriptsroblox",
        Style = 2
    })

    local Label2 = CreditsTab:CreateLabel({
        Text = "Our Roblox: @8h8ph, @kiecsy, @RobTopBot_01.",
        Style = 1
    })

    -- Финальное уведомление
    Luna:Notification({
        Title = "Hey!",
        Icon = "info",
        ImageSource = "Material",
        Content = "Script is fully loaded!"
    })

elseif place == idPlaces.BuildABoatForTreasure then
    -- Скрипт для Build A Boat For Treasure
    local workspace = game:GetService("Workspace")
    local playersService = game:GetService("Players")
    local replicatedstorage = game:GetService("ReplicatedStorage")
    local player = playersService.LocalPlayer

    -- Загрузка Luna
    local Luna = loadstring(game:HttpGet("https://raw.githubusercontent.com/Nebula-Softworks/Luna-Interface-Suite/refs/heads/master/source.lua", true))()

    -- Создание окна
    local Window = Luna:CreateWindow({
        Name = "Global Script's",
        Subtitle = "Build A Boat For Treasure",
        LogoID = 91154874732986,
        LoadingEnabled = true,
        LoadingTitle = "Oxygen 02",
        LoadingSubtitle = "Build A Boat For Treasure",
        ConfigSettings = {
            RootFolder = nil,
            ConfigFolder = "GlobalScripts",
        },
        KeySystem = false,
    })

    -- Создаем вкладки
    local FarmTab = Window:CreateTab({
        Name = "Auto Farm",
        Icon = "repeat",
        ImageSource = "Material",
        ShowTitle = true,
    })

    local ShopTab = Window:CreateTab({
        Name = "Shop",
        Icon = "store",
        ImageSource = "Material",
        ShowTitle = true,
    })

    local EspTab = Window:CreateTab({
        Name = "ESP",
        Icon = "visibility",
        ImageSource = "Material",
        ShowTitle = true,
    })

    -- Цвет для ESP
    local colorplayers = Color3.fromRGB(86, 171, 128)

    local function updateESPColor(color)
        colorplayers = color
        -- Обновление для существующих игроков
        for _, p in ipairs(playersService:GetPlayers()) do
            if p.Character then
                local hl = p.Character:FindFirstChildOfClass("Highlight")
                if hl then
                    hl.FillColor = colorplayers
                end
            end
        end
    end

    local ColorESPPlayers = EspTab:CreateColorPicker({
        Name = "Color of esp players",
        Color = colorplayers,
        Flag = "ColorPicker1",
        Callback = updateESPColor,
    }, "ColorPicker")

    -- Переменная для включения ESP
    local espEnabled = false

    -- Создание функции для установки и удаления хайлайта
    local function SetHighlightForPlayer(plr)
        if plr.Character then
            local hl = plr.Character:FindFirstChildOfClass("Highlight")
            if not hl then
                hl = Instance.new("Highlight")
                hl.Parent = plr.Character
            end
            hl.FillColor = colorplayers
            hl.FillTransparency = 0.5
            hl.OutlineColor = colorplayers
            hl.OutlineTransparency = 0
        end
    end

    local function RemoveHighlightForPlayer(plr)
        if plr.Character then
            local hl = plr.Character:FindFirstChildOfClass("Highlight")
            if hl then
                hl:Destroy()
            end
        end
    end

    -- Создаем toggle для ESP
    local PlayerESP = EspTab:CreateToggle({
        Name = "EspPlayers",
        Description = nil,
        CurrentValue = false,
        Callback = function(Value)
            espEnabled = Value
            if espEnabled then
                -- Включение: создаем хайлайты для текущих
                for _, plr in ipairs(playersService:GetPlayers()) do
                    SetHighlightForPlayer(plr)
                end
            else
                -- Выключение: удаляем хайлайты
                for _, plr in ipairs(playersService:GetPlayers()) do
                    RemoveHighlightForPlayer(plr)
                end
            end
        end
    })

    -- Обработка новых игроков
    playersService.PlayerAdded:Connect(function(plr)
        if espEnabled then
            SetHighlightForPlayer(plr)
        end
        plr.CharacterAdded:Connect(function()
            if espEnabled then
                SetHighlightForPlayer(plr)
            end
        end)
    end)

    -- Вкладка Player для настроек
    local PlayerTab = Window:CreateTab({
        Name = "Player",
        Icon = "person",
        ImageSource = "Material",
        ShowTitle = true
    })

    -- Настройки скорости
    local SpeedSlider = PlayerTab:CreateSlider({
        Name = "Speed",
        Range = {0, 200},
        Increment = 1,
        CurrentValue = 16,
        Callback = function(Value)
            local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                hrp.Parent:FindFirstChildOfClass("Humanoid").WalkSpeed = Value
            end
        end
    }, "Slider")

    -- Настройки прыжка
    local JumpSlider = PlayerTab:CreateSlider({
        Name = "Jump Power",
        Range = {0, 200},
        Increment = 1,
        CurrentValue = 50,
        Callback = function(Value)
            local humanoid = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.JumpPower = Value
            end
        end
    }, "Slider")

    -- Настройки гравитации
    local GravitySlider = PlayerTab:CreateSlider({
        Name = "Gravity",
        Range = {0, 200},
        Increment = 1,
        CurrentValue = 196.2,
        Callback = function(Value)
            workspace.Gravity = Value
        end
    }, "Slider")

    -- Другие вкладки
    local MiscTab = Window:CreateTab({
        Name = "Misc",
        Icon = "auto_awesome",
        ImageSource = "Material",
        ShowTitle = true
    })

    local SettingsTab = Window:CreateTab({
        Name = "Settings",
        Icon = "settings",
        ImageSource = "Material",
        ShowTitle = true
    })

    local CreditsTab = Window:CreateTab({
        Name = "Credits",
        Icon = "info",
        ImageSource = "Material",
        ShowTitle = true
    })

    -- Лейблы в вкладке Credits
    local Label1 = CreditsTab:CreateLabel({
        Text = "Our Telegram: @universalscriptsroblox",
        Style = 2
    })

    local Label2 = CreditsTab:CreateLabel({
        Text = "Our Roblox: @8h8ph, @kiecsy, @RobTopBot_01.",
        Style = 1
    })

else
    -- В случае неподдерживаемой игры
    local Luna = loadstring(game:HttpGet("https://raw.githubusercontent.com/Nebula-Softworks/Luna-Interface-Suite/refs/heads/master/source.lua", true))()

    local Window = Luna:CreateWindow({
        Name = "Global Script's",
        Subtitle = "Not supported game",
        LogoID = 91154874732986,
        LoadingEnabled = true,
        LoadingTitle = "Global Script's",
        LoadingSubtitle = "Not supported game",
        ConfigSettings = {
            RootFolder = nil,
            ConfigFolder = "GlobalScripts",
        },
        KeySystem = false,
    })

    Luna:Notification({
        Title = "Unsupported Game",
        Icon = "error",
        ImageSource = "Material",
        Content = "Did you know what? This script only works in Survive In Area 51 or Build A Boat For Treasure.\n
" ..
                  "If you want to use it in other games, please contact the developer.",
    })
end
